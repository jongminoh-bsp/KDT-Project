name: ğŸ§ª Test Slack Notification

on:
  workflow_dispatch:
    inputs:
      message:
        description: 'í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€'
        required: false
        default: 'Slack ì•Œë¦¼ í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤!'
      channel:
        description: 'Slack ì±„ë„'
        required: false
        default: '#infrastructure'

jobs:
  test-slack:
    runs-on: ubuntu-latest
    steps:
    - name: ğŸ“¢ Send Test Message
      run: |
        curl -X POST -H 'Content-type: application/json' \
        --data '{
          "channel": "${{ github.event.inputs.channel || '#infrastructure' }}",
          "username": "Test Bot",
          "icon_emoji": ":test_tube:",
          "text": "ğŸ§ª GitHub Actions í…ŒìŠ¤íŠ¸",
          "attachments": [{
            "color": "#36a64f",
            "title": "ğŸ“‹ í…ŒìŠ¤íŠ¸ ì •ë³´",
            "fields": [
              {
                "title": "ğŸ’¬ ë©”ì‹œì§€",
                "value": "${{ github.event.inputs.message || 'Slack ì•Œë¦¼ í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤!' }}",
                "short": false
              },
              {
                "title": "ğŸ‘¤ ì‹¤í–‰ì",
                "value": "${{ github.actor }}",
                "short": true
              },
              {
                "title": "â° ì‹¤í–‰ ì‹œê°„",
                "value": "'$(date -u)'",
                "short": true
              },
              {
                "title": "ğŸ”— ì›Œí¬í”Œë¡œìš°",
                "value": "<${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}|ì‹¤í–‰ ë¡œê·¸ ë³´ê¸°>",
                "short": false
              }
            ],
            "footer": "KDT Project Test"
          }]
        }' \
        ${{ secrets.SLACK_WEBHOOK_URL }}
        
    - name: âœ… Test Complete
      run: |
        echo "âœ… Slack ì•Œë¦¼ í…ŒìŠ¤íŠ¸ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!"
        echo "ğŸ“± Slack ì±„ë„ì„ í™•ì¸í•´ì£¼ì„¸ìš”: ${{ github.event.inputs.channel || '#infrastructure' }}"
